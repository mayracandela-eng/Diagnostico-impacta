<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diagnóstico de Arquitectura Profesional 40+ | Modelo IMPACTA®</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #e8d8c8;
    --warm-white: #faf3e0;
    --dark: #402c20;
    --brown: #402c20;
    --gold: #8c6a3d;
    --gold-light: #a8845a;
    --gold-muted: #9a7548;
    --blush: #b08060;
    --ink: #402c20;
    --sand: #e8d8c8;
    --bone: #faf3e0;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Source Sans 3', sans-serif;
    background: var(--bone);
    color: var(--ink);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ──── DECORATIVE LINES ──── */
  .deco-line {
    display: block;
    width: 60px;
    height: 1px;
    background: var(--gold);
    margin: 0 auto;
  }

  /* ──── PROGRESS BAR ──── */
  #progress-bar-wrap {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: rgba(140,106,61,0.18);
    z-index: 100;
  }
  #progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    width: 0%;
    transition: width 0.5s ease;
  }

  /* ──── SECTIONS ──── */
  .screen {
    display: none;
    min-height: 100vh;
    animation: fadeIn 0.6s ease forwards;
  }
  .screen.active { display: flex; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* ──── COVER ──── */
  #screen-cover {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 24px;
    background: var(--dark);
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  #screen-cover::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 80% 60% at 50% -10%, rgba(140,106,61,0.22) 0%, transparent 70%),
      radial-gradient(ellipse 60% 40% at 80% 110%, rgba(140,106,61,0.10) 0%, transparent 60%);
  }

  #screen-cover::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  .cover-inner {
    position: relative;
    max-width: 680px;
  }

  .cover-badge {
    display: inline-block;
    font-family: 'Source Sans 3', sans-serif;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold-light);
    border: 1px solid rgba(140,106,61,0.4);
    padding: 7px 18px;
    margin-bottom: 36px;
  }

  .cover-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(38px, 7vw, 68px);
    font-weight: 300;
    line-height: 1.05;
    color: var(--warm-white);
    letter-spacing: -0.01em;
    margin-bottom: 12px;
  }

  .cover-title em {
    font-style: italic;
    color: var(--gold-light);
  }

  .cover-subtitle {
    font-family: 'Playfair Display', serif;
    font-size: clamp(18px, 3vw, 26px);
    font-weight: 300;
    color: rgba(253,250,245,0.55);
    margin-bottom: 40px;
    line-height: 1.4;
  }

  .cover-desc {
    font-size: 15px;
    font-weight: 300;
    color: rgba(253,250,245,0.65);
    line-height: 1.7;
    max-width: 520px;
    margin: 0 auto 48px;
  }

  .cover-meta {
    display: flex;
    gap: 32px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 52px;
  }

  .cover-meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: rgba(253,250,245,0.5);
    letter-spacing: 0.05em;
  }

  .cover-meta-item span {
    color: var(--gold-muted);
    font-size: 16px;
  }

  .btn-primary {
    display: inline-block;
    font-family: 'Source Sans 3', sans-serif;
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--dark);
    background: linear-gradient(135deg, var(--gold-light), var(--gold));
    padding: 16px 44px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .btn-primary::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0);
    transition: background 0.3s;
  }

  .btn-primary:hover::after { background: rgba(255,255,255,0.15); }
  .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 8px 30px rgba(140,106,61,0.35); }

  .cover-author {
    margin-top: 48px;
    padding-top: 24px;
    border-top: 1px solid rgba(140,106,61,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  .author-dot {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--gold), var(--blush));
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Playfair Display', serif;
    font-size: 16px;
    color: white;
    font-style: italic;
  }

  .author-name {
    font-size: 13px;
    color: rgba(253,250,245,0.55);
    letter-spacing: 0.08em;
  }

  /* ──── QUESTION SCREEN ──── */
  #screen-questions {
    flex-direction: column;
    align-items: center;
    padding: 80px 24px 60px;
    min-height: 100vh;
    background: var(--bone);
  }

  .question-wrap {
    width: 100%;
    max-width: 700px;
  }

  .layer-header {
    text-align: center;
    margin-bottom: 48px;
  }

  .layer-number {
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 6px;
  }

  .layer-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(32px, 5vw, 52px);
    font-weight: 300;
    color: var(--brown);
    line-height: 1.1;
    margin-bottom: 10px;
  }

  .layer-title em { font-style: italic; color: var(--gold); }

  .layer-desc {
    font-size: 14px;
    color: #6b4e38;
    font-weight: 300;
    line-height: 1.6;
    max-width: 460px;
    margin: 12px auto 0;
  }

  .layer-divider {
    width: 48px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    margin: 16px auto 0;
  }

  /* QUESTION CARDS */
  .questions-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 44px;
  }

  .q-card {
    background: var(--warm-white);
    border: 1px solid rgba(140,106,61,0.18);
    padding: 20px 24px;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex;
    align-items: flex-start;
    gap: 16px;
    position: relative;
    overflow: hidden;
  }

  .q-card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    background: var(--gold);
    transform: scaleY(0);
    transition: transform 0.25s ease;
  }

  .q-card:hover {
    border-color: rgba(140,106,61,0.42);
    background: #fdf7ed;
    transform: translateX(3px);
  }

  .q-card.checked {
    background: #f5ece0;
    border-color: rgba(140,106,61,0.5);
  }

  .q-card.checked::before { transform: scaleY(1); }

  .q-checkbox {
    width: 22px;
    height: 22px;
    min-width: 22px;
    border: 1.5px solid rgba(140,106,61,0.42);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    margin-top: 1px;
  }

  .q-card.checked .q-checkbox {
    background: var(--gold);
    border-color: var(--gold);
  }

  .q-check-icon {
    opacity: 0;
    color: white;
    font-size: 13px;
    transition: opacity 0.2s;
  }

  .q-card.checked .q-check-icon { opacity: 1; }

  .q-text {
    font-size: 15px;
    font-weight: 300;
    line-height: 1.55;
    color: var(--ink);
  }

  /* NAVIGATION */
  .nav-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
  }

  .btn-back {
    font-size: 13px;
    color: #9a7d6a;
    background: none;
    border: 1px solid rgba(154,128,112,0.3);
    padding: 12px 24px;
    cursor: pointer;
    letter-spacing: 0.1em;
    transition: all 0.25s;
    font-family: 'Source Sans 3', sans-serif;
  }

  .btn-back:hover { border-color: var(--gold); color: var(--gold); }

  .btn-next {
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--dark);
    background: linear-gradient(135deg, var(--gold-light), var(--gold));
    border: none;
    padding: 14px 36px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Source Sans 3', sans-serif;
  }

  .btn-next:hover { transform: translateY(-1px); box-shadow: 0 6px 24px rgba(140,106,61,0.3); }

  .progress-text {
    font-size: 12px;
    color: #9a7d6a;
    letter-spacing: 0.1em;
    text-align: center;
    flex: 1;
  }

  /* LAYER INDICATORS */
  .layer-dots {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-bottom: 56px;
  }

  .layer-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(140,106,61,0.2);
    transition: all 0.3s;
  }

  .layer-dot.active {
    background: var(--gold);
    transform: scale(1.3);
  }

  .layer-dot.done {
    background: rgba(140,106,61,0.5);
  }

  /* ──── RESULTS SCREEN ──── */
  #screen-results {
    flex-direction: column;
    align-items: center;
    padding: 80px 24px 80px;
    background: var(--bone);
  }

  .results-wrap {
    width: 100%;
    max-width: 740px;
  }

  .results-header {
    text-align: center;
    margin-bottom: 56px;
  }

  .results-eyebrow {
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 14px;
  }

  .results-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(34px, 6vw, 58px);
    font-weight: 300;
    color: var(--brown);
    line-height: 1.1;
    margin-bottom: 14px;
  }

  .results-title em { font-style: italic; color: var(--gold); }

  .results-sub {
    font-size: 15px;
    font-weight: 300;
    color: #6b4e38;
    line-height: 1.6;
    max-width: 500px;
    margin: 0 auto;
  }

  /* SCORE GRID */
  .score-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 48px;
  }

  @media (max-width: 560px) {
    .score-grid { grid-template-columns: 1fr; }
  }

  .score-card {
    background: var(--sand);
    border: 1px solid rgba(140,106,61,0.18);
    padding: 24px;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s;
  }

  .score-card.lowest {
    border-color: rgba(140,106,61,0.6);
    background: #f5ece0;
  }

  .score-card.lowest::before {
    content: 'BRECHA PRINCIPAL';
    position: absolute;
    top: 10px;
    right: -28px;
    font-size: 9px;
    letter-spacing: 0.15em;
    background: var(--gold);
    color: var(--dark);
    padding: 4px 36px;
    transform: rotate(45deg);
    font-weight: 500;
  }

  .score-layer-label {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 6px;
  }

  .score-layer-name {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    font-weight: 300;
    color: var(--brown);
    margin-bottom: 16px;
    line-height: 1.2;
  }

  .score-bar-wrap {
    height: 4px;
    background: rgba(140,106,61,0.12);
    margin-bottom: 10px;
    position: relative;
  }

  .score-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
    width: 0%;
  }

  .score-bar-fill.low { background: linear-gradient(90deg, var(--blush), #D4A090); }

  .score-number {
    font-size: 12px;
    color: #9a7d6a;
  }

  .score-number strong {
    font-size: 20px;
    font-family: 'Playfair Display', serif;
    color: var(--brown);
    font-weight: 300;
  }

  /* INSIGHT BOX */
  .insight-box {
    background: var(--dark);
    padding: 44px 40px;
    margin-bottom: 40px;
    position: relative;
    overflow: hidden;
  }

  .insight-box::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse 80% 50% at 50% 0%, rgba(140,106,61,0.12) 0%, transparent 70%);
  }

  .insight-box::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
  }

  .insight-inner { position: relative; }

  .insight-eyebrow {
    font-size: 10px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold-muted);
    margin-bottom: 14px;
  }

  .insight-headline {
    font-family: 'Playfair Display', serif;
    font-size: clamp(24px, 4vw, 36px);
    font-weight: 300;
    color: var(--warm-white);
    line-height: 1.2;
    margin-bottom: 20px;
  }

  .insight-headline em { font-style: italic; color: var(--gold-light); }

  .insight-text {
    font-size: 14px;
    font-weight: 300;
    color: rgba(253,250,245,0.65);
    line-height: 1.75;
  }

  .insight-text p + p { margin-top: 12px; }

  /* CTA BOX */
  .cta-box {
    background: var(--sand);
    border: 1px solid rgba(140,106,61,0.25);
    padding: 44px 40px;
    text-align: center;
    margin-bottom: 32px;
  }

  .cta-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(26px, 4vw, 40px);
    font-weight: 300;
    color: var(--brown);
    line-height: 1.2;
    margin-bottom: 16px;
  }

  .cta-title em { font-style: italic; color: var(--gold); }

  .cta-list {
    list-style: none;
    margin: 24px 0 32px;
    display: inline-block;
    text-align: left;
  }

  .cta-list li {
    font-size: 14px;
    font-weight: 300;
    color: #5a4030;
    padding: 6px 0;
    display: flex;
    align-items: flex-start;
    gap: 10px;
    line-height: 1.5;
  }

  .cta-list li::before {
    content: '◆';
    color: var(--gold);
    font-size: 8px;
    margin-top: 5px;
    flex-shrink: 0;
  }

  .cta-note {
    font-size: 12px;
    color: #9a7d6a;
    margin-top: 16px;
    font-style: italic;
  }

  /* OVERALL SCORE */
  .overall-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 24px 32px;
    background: var(--sand);
    border: 1px solid rgba(140,106,61,0.2);
    margin-bottom: 40px;
    flex-wrap: wrap;
  }

  .overall-label {
    font-size: 11px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #9a7d6a;
  }

  .overall-score-display {
    font-family: 'Playfair Display', serif;
    font-size: 52px;
    font-weight: 300;
    color: var(--brown);
    line-height: 1;
  }

  .overall-score-display sup {
    font-size: 22px;
    vertical-align: super;
    color: var(--gold);
  }

  .overall-desc {
    font-size: 14px;
    font-weight: 300;
    color: #6b4e38;
    line-height: 1.5;
    max-width: 300px;
  }

  /* FOOTER */
  .results-footer {
    text-align: center;
    padding-top: 32px;
    border-top: 1px solid rgba(140,106,61,0.18);
  }

  .results-footer p {
    font-size: 12px;
    color: #9a7d6a;
    letter-spacing: 0.08em;
  }

  .results-footer strong {
    font-family: 'Playfair Display', serif;
    font-size: 14px;
    color: var(--brown);
    font-style: italic;
    font-weight: 400;
  }

  @media (max-width: 600px) {
    .insight-box, .cta-box { padding: 32px 24px; }
    .overall-row { padding: 20px; gap: 12px; }
  }
</style>
</head>
<body>

<div id="progress-bar-wrap"><div id="progress-bar"></div></div>

<!-- ══ COVER ══ -->
<section class="screen active" id="screen-cover">
  <div class="cover-inner">
    <div class="cover-badge">Modelo IMPACTA® · Diagnóstico Estratégico</div>

    <h1 class="cover-title">
      Diagnóstico de<br>
      <em>Arquitectura</em><br>
      Profesional 40+
    </h1>

    <p class="cover-subtitle">
      ¿Tu trayectoria está estructurada como autoridad?
    </p>

    <p class="cover-desc">
      Evalúa en 5 minutos si tu presencia profesional está diseñada
      como autoridad estratégica en tu nueva etapa — o si aún
      refleja versiones anteriores de ti.
    </p>

    <div class="cover-meta">
      <div class="cover-meta-item">
        <span>◷</span> 5 minutos
      </div>
      <div class="cover-meta-item">
        <span>◈</span> 4 capas · 20 afirmaciones
      </div>
      <div class="cover-meta-item">
        <span>◉</span> Diagnóstico personalizado
      </div>
    </div>

    <button class="btn-primary" onclick="startTest()">
      Comenzar diagnóstico
    </button>

    <div class="cover-author">
      <div class="author-dot">M</div>
      <span class="author-name">Mayra Candela · Arquitecta de Presencia Estratégica®</span>
    </div>
  </div>
</section>

<!-- ══ QUESTIONS ══ -->
<section class="screen" id="screen-questions">
  <div class="question-wrap">

    <div class="layer-dots">
      <div class="layer-dot" id="dot-0"></div>
      <div class="layer-dot" id="dot-1"></div>
      <div class="layer-dot" id="dot-2"></div>
      <div class="layer-dot" id="dot-3"></div>
    </div>

    <div class="layer-header">
      <div class="layer-number" id="layer-number"></div>
      <h2 class="layer-title" id="layer-title"></h2>
      <div class="layer-divider"></div>
      <p class="layer-desc" id="layer-desc"></p>
    </div>

    <div class="questions-list" id="questions-list"></div>

    <div class="nav-row">
      <button class="btn-back" id="btn-back" onclick="prevLayer()">← Anterior</button>
      <div class="progress-text" id="progress-text"></div>
      <button class="btn-next" id="btn-next" onclick="nextLayer()">Siguiente →</button>
    </div>

  </div>
</section>

<!-- ══ RESULTS ══ -->
<section class="screen" id="screen-results">
  <div class="results-wrap">

    <div class="results-header">
      <div class="results-eyebrow">Tu diagnóstico · Modelo IMPACTA®</div>
      <h2 class="results-title">Tu <em>Arquitectura</em><br>Profesional al descubierto</h2>
      <p class="results-sub" id="results-intro"></p>
    </div>

    <div class="overall-row">
      <div>
        <div class="overall-label">Puntuación global</div>
      </div>
      <div class="overall-score-display" id="overall-score-display">0<sup>/20</sup></div>
      <div class="overall-desc" id="overall-desc"></div>
    </div>

    <div class="score-grid" id="score-grid"></div>

    <div class="insight-box">
      <div class="insight-inner">
        <div class="insight-eyebrow">Tu brecha estratégica principal</div>
        <h3 class="insight-headline" id="insight-headline"></h3>
        <div class="insight-text" id="insight-text"></div>
      </div>
    </div>

    <div class="cta-box">
      <h3 class="cta-title">¿Lista para diseñar tu<br><em>autoridad desde criterio?</em></h3>
      <p style="font-size:14px;font-weight:300;color:#7A6254;line-height:1.7;max-width:500px;margin:0 auto">
        En la <strong>Auditoría de Arquitectura Profesional 40+</strong> trabajamos
        directamente sobre las capas donde tu arquitectura necesita intervención.
      </p>
      <ul class="cta-list">
        <li>Diagnóstico profundo por capas</li>
        <li>Formalización de posicionamiento y territorio de autoridad</li>
        <li>Plan de dirección estratégica a 90 días</li>
        <li>Intervención estructural, no mentoría motivacional</li>
      </ul>
      <button class="btn-primary" style="font-size:13px" onclick="window.top.location.href='https://www.mayracandela.com/pgracias'">
        Solicitar evaluación privada
      </button>
      <p class="cta-note">Plazas limitadas · Proceso de selección previo</p>
    </div>

    <div class="results-footer">
      <p style="margin-bottom:6px"><strong>Mayra Candela</strong></p>
      <p>Arquitecta de Presencia Estratégica® · Modelo IMPACTA®</p>
    </div>

  </div>
</section>

<script>
const LAYERS = [
  {
    key: 'I',
    number: 'Capa I · Identidad',
    title: 'Identidad <em>Profesional</em>',
    desc: 'Quién eres hoy profesionalmente y desde qué lugar quieres posicionarte.',
    questions: [
      'Tengo claridad sobre mi etapa profesional actual.',
      'He redefinido mi identidad profesional según mi evolución.',
      'Sé desde qué territorio quiero posicionarme.',
      'Mi experiencia está organizada como ventaja competitiva.',
      'No me identifico con versiones profesionales pasadas.'
    ],
    insight: {
      headline: 'Tu evolución profesional ha <em>superado</em> tu definición interna',
      text: '<p>Has crecido más de lo que tu identidad actual refleja. Estás operando desde un marco que ya no representa quién eres hoy.</p><p>Tu foco no es visibilidad. Es redefinición estratégica. Antes de proyectar, necesitas estructurar quién eres ahora y desde dónde quieres ser percibida.</p><p>Sin identidad actualizada, cualquier estrategia externa es inestable.</p>'
    }
  },
  {
    key: 'M',
    number: 'Capa M · Mensaje',
    title: 'Mensaje y <em>Posicionamiento</em>',
    desc: 'Cómo estructuras tu experiencia como diferenciación estratégica.',
    questions: [
      'Sé explicar claramente qué hago y para quién hoy.',
      'Mi propuesta de valor está estructurada, no improvisada.',
      'Tengo diferenciación clara frente a otras profesionales.',
      'Mi narrativa profesional conecta con mi cliente ideal.',
      'Mi experiencia no se percibe genérica.'
    ],
    insight: {
      headline: 'Tu experiencia existe, pero no está <em>estructurada como autoridad</em>',
      text: '<p>Tienes la trayectoria. Tienes los resultados. Pero tu mensaje no está formateado como posicionamiento estratégico.</p><p>Esto hace que tu experiencia se perciba dispersa o genérica — no porque no tengas valor, sino porque ese valor no está arquitecturado.</p><p>Necesitas posicionamiento formal, no más contenido ni más visibilidad.</p>'
    }
  },
  {
    key: 'P',
    number: 'Capa P · Presencia',
    title: 'Presencia <em>Estratégica</em>',
    desc: 'Cómo tu imagen y comunicación proyectan tu nivel real.',
    questions: [
      'Mi imagen refleja mi nivel profesional actual.',
      'Mi estilo comunica autoridad sin forzar un personaje.',
      'Mi presencia digital y offline es coherente.',
      'Mi comunicación proyecta seguridad estructural.',
      'Mi entorno profesional percibe mi evolución.'
    ],
    insight: {
      headline: 'Tu base puede estar clara — pero tu <em>percepción externa</em> no la amplifica',
      text: '<p>Hay una brecha entre cómo te ves internamente y cómo te perciben externamente. Tu imagen y presencia no están sincronizadas con tu nivel real.</p><p>La imagen no crea autoridad. La proyecta. Si la proyección no es coherente, el nivel que has construido no se percibe en su totalidad.</p><p>La coherencia visible entre quién eres y cómo te presentas es tu próxima palanca estratégica.</p>'
    }
  },
  {
    key: 'A',
    number: 'Capa A · Acción',
    title: 'Acción y Dirección <em>Ejecutiva</em>',
    desc: 'Cómo conviertes claridad en movimiento profesional concreto.',
    questions: [
      'Tengo estructurada una oferta alineada a mi nivel actual.',
      'Sé qué tipo de oportunidades quiero atraer.',
      'Mi siguiente paso profesional es claro y definido.',
      'Tengo un plan estratégico a 90 días.',
      'Estoy moviéndome con intención, no reacción.'
    ],
    insight: {
      headline: 'Tienes claridad — pero no has <em>formalizado dirección ejecutiva</em>',
      text: '<p>La visión está. La conciencia también. Pero no hay estructura operativa que convierta esa claridad en movimiento concreto y sostenido.</p><p>La autoridad sin dirección ejecutiva se queda en potencial no activado. Las oportunidades correctas no llegan porque no hay un sistema que las atraiga.</p><p>El paso que necesitas no es pensar más. Es estructurar tu dirección en los próximos 90 días.</p>'
    }
  }
];

let currentLayer = 0;
let scores = [0, 0, 0, 0];
let checked = [[], [], [], []];

// init checked arrays
LAYERS.forEach((l, i) => {
  checked[i] = new Array(l.questions.length).fill(false);
});

function startTest() {
  showScreen('screen-questions');
  renderLayer(0);
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => {
    s.classList.remove('active');
    s.style.display = 'none';
  });
  const el = document.getElementById(id);
  el.style.display = 'flex';
  el.classList.add('active');
  window.scrollTo(0, 0);
}

function renderLayer(idx) {
  currentLayer = idx;
  const layer = LAYERS[idx];

  // dots
  document.querySelectorAll('.layer-dot').forEach((d, i) => {
    d.className = 'layer-dot';
    if (i < idx) d.classList.add('done');
    if (i === idx) d.classList.add('active');
  });

  document.getElementById('layer-number').textContent = layer.number;
  document.getElementById('layer-title').innerHTML = layer.title;
  document.getElementById('layer-desc').textContent = layer.desc;
  document.getElementById('progress-text').textContent = `${idx + 1} de 4 capas`;

  // back btn
  document.getElementById('btn-back').style.visibility = idx === 0 ? 'hidden' : 'visible';
  document.getElementById('btn-next').textContent = idx === 3 ? 'Ver resultados →' : 'Siguiente →';

  // questions
  const list = document.getElementById('questions-list');
  list.innerHTML = '';
  layer.questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'q-card' + (checked[idx][qi] ? ' checked' : '');
    card.innerHTML = `
      <div class="q-checkbox">
        <span class="q-check-icon">✓</span>
      </div>
      <div class="q-text">${q}</div>
    `;
    card.addEventListener('click', () => toggleQ(card, idx, qi));
    list.appendChild(card);
  });

  updateProgress();
}

function toggleQ(card, layerIdx, qIdx) {
  checked[layerIdx][qIdx] = !checked[layerIdx][qIdx];
  card.classList.toggle('checked', checked[layerIdx][qIdx]);
  scores[layerIdx] = checked[layerIdx].filter(Boolean).length;
  updateProgress();
}

function updateProgress() {
  const total = LAYERS.reduce((s, l) => s + l.questions.length, 0);
  const answered = checked.flat().filter(Boolean).length;
  const pct = Math.round((currentLayer / 4 + (answered / total) * 0.25) * 100);
  document.getElementById('progress-bar').style.width = Math.min(pct, 95) + '%';
}

function nextLayer() {
  if (currentLayer < 3) {
    renderLayer(currentLayer + 1);
    window.scrollTo(0, 0);
  } else {
    showResults();
  }
}

function prevLayer() {
  if (currentLayer > 0) renderLayer(currentLayer - 1);
}

function showResults() {
  document.getElementById('progress-bar').style.width = '100%';
  showScreen('screen-results');

  const total = scores.reduce((a, b) => a + b, 0);
  const minIdx = scores.indexOf(Math.min(...scores));

  // overall
  document.getElementById('overall-score-display').innerHTML = `${total}<sup>/20</sup>`;

  let overallDesc = '';
  if (total >= 17) overallDesc = 'Tu arquitectura profesional tiene una base sólida. Hay detalles por afinar para que la percepción externa iguale tu nivel real.';
  else if (total >= 12) overallDesc = 'Tienes experiencia valiosa, pero hay capas donde la estructura aún no amplifica tu autoridad completa.';
  else if (total >= 7) overallDesc = 'Hay brechas significativas en tu arquitectura. Tu trayectoria merece una estructura que la proyecte con su verdadero peso.';
  else overallDesc = 'Tu arquitectura profesional necesita una intervención estructural completa para alinearse con tu evolución real.';

  document.getElementById('overall-desc').textContent = overallDesc;

  // intro
  let intro = '';
  if (total >= 15) intro = 'Has construido mucho. Tu arquitectura tiene una base sólida, con algunas capas que necesitan afinación estratégica para proyectar todo tu nivel.';
  else if (total >= 10) intro = 'Tu trayectoria es real y valiosa. Pero hay capas en tu arquitectura que están limitando cómo se percibe tu autoridad externamente.';
  else intro = 'Tu experiencia supera con creces la estructura con la que la estás proyectando. Hay espacio importante para intervención estratégica.';
  document.getElementById('results-intro').textContent = intro;

  // grid
  const grid = document.getElementById('score-grid');
  grid.innerHTML = '';
  LAYERS.forEach((l, i) => {
    const pct = (scores[i] / 5) * 100;
    const isLowest = i === minIdx;
    const card = document.createElement('div');
    card.className = 'score-card' + (isLowest ? ' lowest' : '');
    card.innerHTML = `
      <div class="score-layer-label">Capa ${l.key}</div>
      <div class="score-layer-name">${l.key === 'I' ? 'Identidad' : l.key === 'M' ? 'Mensaje' : l.key === 'P' ? 'Presencia' : 'Acción'}</div>
      <div class="score-bar-wrap">
        <div class="score-bar-fill ${isLowest ? 'low' : ''}" style="width:${pct}%"></div>
      </div>
      <div class="score-number"><strong>${scores[i]}</strong>/5 afirmaciones activas</div>
    `;
    grid.appendChild(card);
  });

  // Trigger bar animations after render
  setTimeout(() => {
    grid.querySelectorAll('.score-bar-fill').forEach((bar, i) => {
      bar.style.width = ((scores[i] / 5) * 100) + '%';
    });
  }, 100);

  // insight
  const insight = LAYERS[minIdx].insight;
  document.getElementById('insight-headline').innerHTML = insight.headline;
  document.getElementById('insight-text').innerHTML = insight.text;
}
</script>
</body>
</html>
